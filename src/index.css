/* Import fonts first */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   SOP MANAGER DESIGN SYSTEM - GLOBAL STYLES
   ============================================================================ */

/* ============================================================================
   BASE STYLES
   ============================================================================ */

@layer base {
  /* Root element with design system variables */
  :root {
    /* Design tokens will be automatically injected by Tailwind config */
    
    /* Custom properties for runtime theming */
    --sop-font-family-sans: 'Inter', system-ui, sans-serif;
    --sop-font-family-mono: 'JetBrains Mono', Consolas, monospace;
    
    /* Theme variables */
    --sop-theme-transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Dark theme support */
  [data-theme="dark"] {
    --sop-bg-primary: #0f172a;
    --sop-bg-secondary: #1e293b;
    --sop-text-primary: #f8fafc;
    --sop-text-secondary: #cbd5e1;
    --sop-border-primary: #334155;
  }

  /* Light theme (default) */
  [data-theme="light"] {
    --sop-bg-primary: #ffffff;
    --sop-bg-secondary: #f8fafc;
    --sop-text-primary: #0f172a;
    --sop-text-secondary: #475569;
    --sop-border-primary: #e2e8f0;
  }

  /* Base HTML elements */
  html {
    font-family: var(--sop-font-family-sans);
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    -moz-tab-size: 4;
    tab-size: 4;
  }

  body {
    margin: 0;
    font-family: var(--sop-font-family-sans);
    font-size: 1rem;
    line-height: 1.5;
    color: var(--sop-text-primary);
    background-color: var(--sop-bg-primary);
    transition: var(--sop-theme-transition);
  }

  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--sop-font-family-sans);
    font-weight: 600;
    line-height: 1.25;
    margin: 0;
  }

  h1 { font-size: 2.25rem; } /* 36px */
  h2 { font-size: 1.875rem; } /* 30px */
  h3 { font-size: 1.5rem; } /* 24px */
  h4 { font-size: 1.25rem; } /* 20px */
  h5 { font-size: 1.125rem; } /* 18px */
  h6 { font-size: 1rem; } /* 16px */

  p {
    margin: 0 0 1rem 0;
  }

  /* Links */
  a {
    color: #3b82f6; /* primary-500 */
    text-decoration: none;
    transition: var(--sop-theme-transition);
  }

  a:hover {
    color: #2563eb; /* primary-600 */
    text-decoration: underline;
  }

  /* Lists */
  ul, ol {
    margin: 0;
    padding: 0;
    list-style: none;
  }

  /* Code */
  code {
    font-family: var(--sop-font-family-mono);
    font-size: 0.875rem;
    background-color: #f1f5f9; /* neutral-100 */
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
  }

  pre {
    font-family: var(--sop-font-family-mono);
    background-color: #f8fafc; /* neutral-50 */
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
  }

  /* Focus styles for accessibility */
  *:focus {
    outline: 2px solid #3b82f6; /* primary-500 */
    outline-offset: 2px;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ============================================================================
   COMPONENT STYLES
   ============================================================================ */

@layer components {
  /* Button base styles */
  .btn {
    @apply inline-flex items-center justify-center rounded-lg font-medium transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500 active:bg-primary-700;
  }

  .btn-secondary {
    @apply bg-white text-gray-900 border border-gray-300 hover:bg-gray-50 focus:ring-primary-500 active:bg-gray-100;
  }

  .btn-danger {
    @apply bg-error-500 text-white hover:bg-error-600 focus:ring-error-500 active:bg-error-700;
  }

  .btn-ghost {
    @apply bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-primary-500 active:bg-gray-200;
  }

  /* Button sizes */
  .btn-sm {
    @apply px-3 py-1.5 text-sm;
  }

  .btn-md {
    @apply px-4 py-2 text-base;
  }

  .btn-lg {
    @apply px-6 py-3 text-lg;
  }

  /* Input base styles */
  .input {
    @apply block w-full rounded-lg border border-gray-300 px-3 py-2 text-base placeholder-gray-400 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .input-error {
    @apply border-error-500 focus:border-error-500 focus:ring-error-500;
  }

  /* Card base styles */
  .card {
    @apply bg-white rounded-lg border border-gray-200 shadow-sm;
  }

  .card-header {
    @apply px-6 py-4 border-b border-gray-200;
  }

  .card-content {
    @apply px-6 py-4;
  }

  .card-footer {
    @apply px-6 py-4 border-t border-gray-200 bg-gray-50;
  }

  /* Modal base styles */
  .modal-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50;
  }

  .modal-content {
    @apply bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto;
  }

  /* Toast base styles */
  .toast {
    @apply fixed top-4 right-4 z-50 bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm;
  }

  .toast-success {
    @apply border-success-200 bg-success-50 text-success-800;
  }

  .toast-error {
    @apply border-error-200 bg-error-50 text-error-800;
  }

  .toast-warning {
    @apply border-warning-200 bg-warning-50 text-warning-800;
  }

  /* Loading spinner */
  .spinner {
    @apply animate-spin rounded-full border-2 border-gray-300 border-t-primary-500;
  }

  .spinner-sm {
    @apply w-4 h-4;
  }

  .spinner-md {
    @apply w-6 h-6;
  }

  .spinner-lg {
    @apply w-8 h-8;
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-800;
  }

  .badge-success {
    @apply bg-success-100 text-success-800;
  }

  .badge-warning {
    @apply bg-warning-100 text-warning-800;
  }

  .badge-error {
    @apply bg-error-100 text-error-800;
  }

  .badge-neutral {
    @apply bg-gray-100 text-gray-800;
  }

  /* Avatar styles */
  .avatar {
    @apply inline-flex items-center justify-center rounded-full bg-gray-300 text-gray-700 font-medium;
  }

  .avatar-sm {
    @apply w-8 h-8 text-sm;
  }

  .avatar-md {
    @apply w-10 h-10 text-base;
  }

  .avatar-lg {
    @apply w-12 h-12 text-lg;
  }

  /* Tooltip styles */
  .tooltip {
    @apply absolute z-50 px-2 py-1 text-xs font-medium text-white bg-gray-900 rounded shadow-sm opacity-0 pointer-events-none transition-opacity duration-200;
  }

  .tooltip::before {
    @apply absolute w-0 h-0 border-4 border-transparent;
    content: '';
  }

  .tooltip-top::before {
    @apply border-t-gray-900;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
  }

  .tooltip-bottom::before {
    @apply border-b-gray-900;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
  }

  /* Dropdown styles */
  .dropdown {
    @apply absolute z-40 mt-1 w-full bg-white rounded-lg shadow-lg border border-gray-200 py-1;
  }

  .dropdown-item {
    @apply block w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none;
  }

  /* Form styles */
  .form-group {
    @apply mb-4;
  }

  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-1;
  }

  .form-error {
    @apply mt-1 text-sm text-error-600;
  }

  .form-help {
    @apply mt-1 text-sm text-gray-500;
  }

  /* Table styles */
  .table {
    @apply min-w-full divide-y divide-gray-200;
  }

  .table-header {
    @apply bg-gray-50;
  }

  .table-header-cell {
    @apply px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider;
  }

  .table-body {
    @apply bg-white divide-y divide-gray-200;
  }

  .table-row {
    @apply hover:bg-gray-50;
  }

  .table-cell {
    @apply px-6 py-4 whitespace-nowrap text-sm text-gray-900;
  }

  /* Navigation styles */
  .nav {
    @apply flex space-x-8;
  }

  .nav-item {
    @apply text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200;
  }

  .nav-item-active {
    @apply text-primary-600 bg-primary-50;
  }

  /* Sidebar styles */
  .sidebar {
    @apply fixed inset-y-0 left-0 z-40 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out;
  }

  .sidebar-closed {
    @apply -translate-x-full;
  }

  .sidebar-open {
    @apply translate-x-0;
  }

  /* Layout styles */
  .layout {
    @apply min-h-screen bg-gray-50;
  }

  .layout-header {
    @apply bg-white border-b border-gray-200;
  }

  .layout-main {
    @apply flex-1;
  }

  .layout-sidebar {
    @apply w-64 bg-white border-r border-gray-200;
  }

  .layout-content {
    @apply flex-1 p-6;
  }

  /* Utility classes for common patterns */
  .text-gradient {
    @apply bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent;
  }

  .bg-gradient {
    @apply bg-gradient-to-r from-primary-500 to-primary-600;
  }

  .shadow-soft {
    @apply shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)];
  }

  .shadow-medium {
    @apply shadow-[0_4px_25px_-5px_rgba(0,0,0,0.1),0_10px_10px_-5px_rgba(0,0,0,0.04)];
  }

  .shadow-strong {
    @apply shadow-[0_10px_40px_-10px_rgba(0,0,0,0.15),0_20px_25px_-5px_rgba(0,0,0,0.1)];
  }
}

/* ============================================================================
   UTILITY STYLES
   ============================================================================ */

@layer utilities {
  /* Custom scrollbar */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e1 #f1f5f9;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: #f1f5f9;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }

  /* Text truncation */
  .text-truncate {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
  }

  .text-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .text-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Aspect ratios */
  .aspect-square {
    aspect-ratio: 1 / 1;
  }

  .aspect-video {
    aspect-ratio: 16 / 9;
  }

  .aspect-photo {
    aspect-ratio: 4 / 3;
  }

  /* Backdrop blur */
  .backdrop-blur-sm {
    backdrop-filter: blur(4px);
  }

  .backdrop-blur-md {
    backdrop-filter: blur(12px);
  }

  .backdrop-blur-lg {
    backdrop-filter: blur(16px);
  }

  /* Glass effect */
  .glass {
    @apply bg-white bg-opacity-20 backdrop-blur-md border border-white border-opacity-20;
  }

  /* Gradient text */
  .gradient-text {
    @apply bg-gradient-to-r from-primary-600 via-primary-500 to-primary-400 bg-clip-text text-transparent;
  }

  /* Animated gradient background */
  .animated-gradient {
    background: linear-gradient(-45deg, #3b82f6, #1d4ed8, #1e40af, #1e3a8a);
    background-size: 400% 400%;
    animation: gradient 15s ease infinite;
  }

  @keyframes gradient {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  /* Pulse animation */
  .animate-pulse-slow {
    animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Bounce animation */
  .animate-bounce-slow {
    animation: bounce 2s infinite;
  }

  /* Fade in animation */
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Slide in animation */
  .animate-slide-in {
    animation: slideIn 0.3s ease-out;
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Scale in animation */
  .animate-scale-in {
    animation: scaleIn 0.2s ease-out;
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
}

/* ============================================================================
   RESPONSIVE DESIGN
   ============================================================================ */

/* Mobile-first responsive design */
@media (max-width: 640px) {
  .container {
    @apply px-4;
  }
  
  .card {
    @apply mx-4;
  }
  
  .modal-content {
    @apply mx-4 max-w-sm;
  }
}

@media (min-width: 641px) and (max-width: 1024px) {
  .container {
    @apply px-6;
  }
}

@media (min-width: 1025px) {
  .container {
    @apply px-8;
  }
}

/* ============================================================================
   PRINT STYLES
   ============================================================================ */

@media print {
  .no-print {
    display: none !important;
  }
  
  .print-only {
    display: block !important;
  }
  
  body {
    background: white !important;
    color: black !important;
  }
  
  .card {
    box-shadow: none !important;
    border: 1px solid #ccc !important;
  }
}

/* ============================================================================
   ACCESSIBILITY ENHANCEMENTS
   ============================================================================ */

/* High contrast mode support */
@media (prefers-contrast: high) {
  .btn {
    border: 2px solid currentColor;
  }
  
  .input {
    border: 2px solid currentColor;
  }
  
  .card {
    border: 2px solid currentColor;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus visible for keyboard navigation */
.focus-visible:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
